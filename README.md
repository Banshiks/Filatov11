# Домашнее задание к занятию «Резервное копирование баз данных» Филатов Олег

**Домашнее задание выполните в Google Docs или в md-файле в вашем репозитории GitHub.** 

Для оформления вашего решения в GitHub можете воспользоваться [шаблоном](https://github.com/netology-code/sys-pattern-homework).

Название файла должно содержать номер лекции и фамилию студента. Пример названия: «12.8. Резервное копирование баз данных — Александр Александров».

Перед тем как выслать ссылку, убедитесь, что её содержимое не является приватным, то есть открыто на просмотр всем, у кого есть ссылка. Если необходимо прикрепить дополнительные ссылки, просто добавьте их в свой Google Docs.

Любые вопросы по решению задач задавайте в чате учебной группы.

---

### Задание 1. Резервное копирование

### Кейс
Финансовая компания решила увеличить надёжность работы баз данных и их резервного копирования. 

Необходимо описать, какие варианты резервного копирования подходят в случаях: 

1.1. Необходимо восстанавливать данные в полном объёме за предыдущий день.

1.2. Необходимо восстанавливать данные за час до предполагаемой поломки.

1.3.* Возможен ли кейс, когда при поломке базы происходило моментальное переключение на работающую или починенную базу данных.

Для повышения надёжности и обеспечения возможности восстановления данных в случае сбоя, финансовая компания должна выбрать подходящие стратегии резервного копирования. Ниже приведены рекомендуемые варианты для каждого из указанных случаев:

---

### **1.1. Необходимо восстанавливать данные в полном объёме за предыдущий день**

####  Подходящий вариант: **Ежедневное полное резервное копирование (Full Backup Daily)**

**Описание:**
- Каждый день создаётся **полная копия всей базы данных**.
- Восстановление производится на основе одной последней полной резервной копии.

**Преимущества:**
- Простота восстановления — достаточно только одной копии.
- Быстрое восстановление данных.
- Надёжность при относительно простой процедуре.

**Недостатки:**
- Высокое потребление дискового пространства.
- Может занимать больше времени и ресурсов при больших объёмах данных.

**Рекомендации:**
- Использовать в связке с **шифрованием** и **проверкой целостности** резервных копий.
- Хранить копии в **разных физических локациях**, включая offsite-хранилища или облачные сервисы (например, AWS S3, Azure Blob Storage).

---

### **1.2. Необходимо восстанавливать данные за час до предполагаемой поломки**

####  Подходящий вариант: **Комбинированное резервное копирование (Full + Differential / Incremental Backups)**

##### Возможные сценарии:
1. **Полное + Инкрементное резервное копирование (Full + Incremental)**
   - Полная резервная копия делается раз в неделю.
   - Ежечасно создаются инкрементные копии (только изменения с момента последней копии).
   - Восстановление требует полной копии + все инкрементные копии до нужного момента.

2. **Полное + Дифференциальное резервное копирование (Full + Differential)**
   - Полная резервная копия делается раз в неделю.
   - Ежечасно создаются дифференциальные копии (все изменения с момента последней полной копии).
   - Восстановление требует полной копии + одна дифференциальная копия.

**Преимущества:**
- Возможность точного восстановления данных на момент, близкий к аварии (в данном случае — за 1 час).
- Меньше затрат на хранение по сравнению с ежедневными полными копиями.

**Недостатки:**
- Сложнее процесс восстановления (особенно при использовании инкрементальных копий).
- Зависит от стабильности всех созданных копий цепочки.

**Рекомендации:**
- Настроить автоматическое резервное копирование с интервалом в 1 час.
- Использовать технологии логического резервного копирования (например, **Point-in-Time Recovery** с помощью логов транзакций — WAL в PostgreSQL, binary logs в MySQL).
- Организовать **географически удалённое хранение** резервных копий.

---

*Приведите ответ в свободной форме.*

---

### Задание 2. PostgreSQL

2.1. С помощью официальной документации приведите пример команды резервирования данных и восстановления БД (pgdump/pgrestore).

2.1.* Возможно ли автоматизировать этот процесс? Если да, то как?

*Приведите ответ в свободной форме.*

---

### Задание 3. MySQL

3.1. С помощью официальной документации приведите пример команды инкрементного резервного копирования базы данных MySQL. 

3.1.* В каких случаях использование реплики будет давать преимущество по сравнению с обычным резервным копированием?

*Приведите ответ в свободной форме.*

---

Задания, помеченные звёздочкой, — дополнительные, то есть не обязательные к выполнению, и никак не повлияют на получение вами зачёта по этому домашнему заданию. Вы можете их выполнить, если хотите глубже шире разобраться в материале.
